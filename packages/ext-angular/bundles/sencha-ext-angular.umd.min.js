!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("script-loader!../ext/ext..prod"),require("script-loader!../ext/css.prod")):"function"==typeof define&&define.amd?define("@sencha/ext-angular",["exports","@angular/core","script-loader!../ext/ext..prod","script-loader!../ext/css.prod"],t):t(((e=e||self).sencha=e.sencha||{},e.sencha["ext-angular"]={}),e.ng.core)}(this,function(e,t){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function a(e,t){return function(n,r){t(n,r,e)}}function o(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var i=function(){function e(n,r,a){var o=this;this.metaData=r,this.hostComponent=a,this.node=n,this.parentNode=a,this.newDiv=document.createElement("div"),this.node.insertAdjacentElement("beforebegin",this.newDiv),this.xtype=r.XTYPE,this.properties=r.PROPERTIES,this.propertiesobject="propertiesobject",this.events=r.EVENTS,this.eventnames=r.EVENTNAMES,this.base=e,this.eventnames.forEach(function(e,n){"fullscreen"!=e?o.currentEl[e]=new t.EventEmitter:o.currentEl[e+"event"]=new t.EventEmitter})}return Object.defineProperty(e.prototype,"childComponents",{get:function(){var e=this;return this._childComponents.filter(function(t){return t!==e})},enumerable:!0,configurable:!0}),e.prototype.baseOnInit=function(e){},e.prototype.baseAfterViewInit=function(e){this.initMe()},e.prototype.createRawChildren=function(){if(this.isAngular)this.rawChildren=this.childComponents;else{this.ewcChildren=Array.prototype.slice.call(this.children),this.rawChildren=[];for(var e=0,t=0;t<this.ewcChildren.length;t++)null!=this.ewcChildren[t].XTYPE&&(this.rawChildren[e]={},this.rawChildren[e]=this.ewcChildren[t],this.rawChildren[e].currentComponent=this.ewcChildren[t],this.rawChildren[e].node=this.ewcChildren[t],e++)}},e.prototype.atEnd=function(){console.log("*** at end"),console.log("this - "+this.currentElName),console.dir(this.currentEl.A),null!=this.parentEl?(console.log("parent - "+this.parentElName),console.dir(this.parentEl.A)):console.log("No EXT parent")},e.prototype.initMe=function(){console.log(""),console.log("*** initMe for "+this.currentElName),this.createRawChildren(),this.setHasParent(),this.setDirection(),this.figureOutA(),this.createProps(this.properties,this.propertiesobject,this.events,this.eventnames),this.createExtComponent(),this.assessChildren(this.base,this.xtype),this.atEnd(),1==this.last&&console.log("this is the end...")},e.prototype.setHasParent=function(){null==this.parentEl?this.hasParent=!1:"EXT-"==this.parentElName.substring(0,4)?this.hasParent=!0:this.hasParent=!1},e.prototype.setDirection=function(){0==this.base.count&&(this.base.count++,0==this.hasParent?this.base.DIRECTION="TopToBottom":"EXT-"==this.parentElName.substring(0,4)?this.base.DIRECTION="BottomToTop":this.base.DIRECTION="TopToBottom"),console.log(this.base.DIRECTION)},e.prototype.figureOutA=function(){this.hasParent&&null==this.parentEl.A&&this.init(this.parentEl,this.parentNode),null==this.currentEl.A&&this.init(this.currentEl,this)},e.prototype.init=function(e,t){if(e.A={},e.A.props={},e.A.xtype=t.xtype,e.A.CHILDRENCOMPONENTS=[],e.A.CHILDRENCOMPONENTSCOUNT=0,e.A.CHILDRENCOMPONENTSADDED=0,"TopToBottom"==this.base.DIRECTION){e.A.CHILDRENCOMPONENTS=e.rawChildren;for(var n=0;n<e.A.CHILDRENCOMPONENTS.length;n++)"EXT-"==this.getCurrentElName(e.A.CHILDRENCOMPONENTS[n]).substring(0,4)&&e.A.CHILDRENCOMPONENTSCOUNT++;e.A.CHILDRENCOMPONENTSLEFT=e.A.CHILDRENCOMPONENTSCOUNT}},e.prototype.createExtComponent=function(){var e=this.currentEl.A;if(1==e.props.viewport){e.ext=Ext.create(e.props),console.log("0-Ext.application: "+e.props.xtype);var t=this;Ext.application({name:"MyEWCApp",launch:function(){Ext.Viewport.add([t.currentEl.A.ext]),window.router&&window.router.init(),console.log(t.base.DIRECTION+" in launch "),"BottomToTop"==t.base.DIRECTION&&(console.log("the last thing to do..."),t.last=!0)}})}else null==this.parentNode?(console.log("1- Ext.create: "+this.currentElName+" HTML parent: "+this.currentElName),e.props.renderTo=this.newDiv,e.ext=Ext.create(e.props)):"EXT-"!=this.parentElName.substring(0,4)?(console.log("2- Ext.create: "+this.currentElName+"  HTML parent: "+this.parentElName),e.props.renderTo=this.newDiv,this.currentEl.A.ext=Ext.create(e.props)):(console.log("3- Ext.create: "+this.currentElName+"  Ext parent: "+this.parentElName),e.ext=Ext.create(e.props))},e.prototype.assessChildren=function(e,t){var n=this.currentEl.A;console.log("assessChildren for: "+t),null!=this._extitems&&1==this._extitems.length&&(console.log("set html"),n.ext.setHtml(this._extitem.nativeElement)),null!=this._extitems&&1==this._extroutes.length&&(console.log("set router"),n.ext.setHtml(this._extroute.nativeElement)),0==n.CHILDRENCOMPONENTSCOUNT&&0==n.CHILDRENCOMPONENTSLEFT&&0==n.CHILDRENCOMPONENTSADDED&&null==this.parentEl?(console.log("Solo"),console.log("ready event for "+this.currentElName),this.sendReadyEvent(this)):n.CHILDRENCOMPONENTSADDED>0&&(console.log("addChildren"),console.dir(n.CHILDRENCOMPONENTS),this.addChildren(this,n.CHILDRENCOMPONENTS),console.log("ready event for "+this.currentElName),this.sendReadyEvent(this),this.node.remove()),null!=this.parentEl&&("TopToBottom"==e.DIRECTION?(console.log("TopToBottom"),this.parentEl.A.CHILDRENCOMPONENTS.push(this),this.parentEl.A.CHILDRENCOMPONENTSADDED++,this.parentEl.A.CHILDRENCOMPONENTSLEFT--,0==this.parentEl.A.CHILDRENCOMPONENTSLEFT&&(this.addChildren(this.parentEl,this.parentEl.A.CHILDRENCOMPONENTS),console.log("ready event for "+this.parentElName+"(parent)"),this.sendReadyEvent(this.parentEl))):(this.parentEl.A.CHILDRENCOMPONENTS.push(this.currentEl),this.parentEl.A.CHILDRENCOMPONENTSADDED++,console.log("ready event for "+this.currentElName),this.sendReadyEvent(this)))},e.prototype.addChildren=function(e,t){for(var n=0;n<t.length;n++){var r={parentCmp:{},childCmp:{}};r.parentCmp=e.currentEl.A.ext,r.childCmp=t[n].A.ext,this.addTheChild(r.parentCmp,r.childCmp,null)}},e.prototype.addTheChild=function(e,t,n){var r=e.xtype,a=t.xtype;if(null==this.currentEl.A.ext.initialConfig.align||"titlebar"==r||"grid"==r||"lockedgrid"==r||"button"==r){var o=!1,i=!1;switch(r){case"button":switch(a){case"menu":e.setMenu(t);break;default:o=!0}break;case"booleancolumn":case"checkcolumn":case"gridcolumn":case"column":case"templatecolumn":case"gridcolumn":case"column":case"templatecolumn":case"datecolumn":case"dragcolumn":case"numbercolumn":case"selectioncolumn":case"textcolumn":case"treecolumn":case"rownumberer":switch(a){case"renderercell":e.setCell(t);break;case"column":case"gridcolumn":e.add(t);break;default:o=!0}break;case"grid":case"lockedgrid":switch(a){case"gridcolumn":case"column":case"treecolumn":case"textcolumn":case"checkcolumn":case"datecolumn":case"rownumberer":case"numbercolumn":case"booleancolumn":if(null==n)"grid"==r?e.addColumn(t):e.add(t);else{var s=0;null!=e.registeredColumns&&(s=e.registeredColumns.length),"grid"==r?e.insertColumn(n+s,t):e.insert(n+s,t)}break;default:o=!0}break;default:o=!0}switch(a){case"toolbar":case"titlebar":null!=e.getHideHeaders?!1===e.getHideHeaders()?e.insert(1,t):e.add(t):null!=e.add?null==n?e.add(t):e.insert(n,t):e.add(t);break;case"tooltip":e.setTooltip(t);break;case"plugin":e.setPlugin(t);break;default:i=!0}1==o&&1==i&&e.add(t)}else console.error("Can only use align property if parent is a Titlebar or Grid or Button")},Object.defineProperty(e.prototype,"currentEl",{get:function(){return null!=this._extitems?this.node:this},enumerable:!0,configurable:!0}),e.prototype.getCurrentElName=function(e){return null!=e._extitems?e.node.nodeName:e.nodeName},Object.defineProperty(e.prototype,"currentElName",{get:function(){return null!=this._extitems?this.node.nodeName:this.nodeName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAngular",{get:function(){return null!=this._extitems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentEl",{get:function(){return this.isAngular?null==this.parentNode?null:this.parentNode.node:this.parentNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentElName",{get:function(){return this.isAngular?null==this.parentNode?null:this.parentNode.node.nodeName:this.parentNode.nodeName},enumerable:!0,configurable:!0}),e.prototype.sendReadyEvent=function(e){var t=e.currentEl.A.ext;null!=e._extitems?e.ready.emit({detail:{cmp:t}}):e.dispatchEvent(new CustomEvent("ready",{detail:{cmp:t}}))},e.prototype.createProps=function(e,n,r,a){var o=this,i=this.currentEl.A.props;i.xtype=this.xtype;for(var s=!1,l=0;l<e.length;l++){var d=e[l];"handler"==d&&null!=this[d]&&(i[d]=this[d]),("cartesian"!==i.xtype&&"polar"!==i.xtype||"layout"!==d)&&("listeners"==d&&null!=this[d]?(i[d]=this[d],s=!0):null!=this[d]&&"listeners"!=d&&"config"!=d&&"handler"!=d&&"fitToParent"!=d&&(i[d]=this[d]))}if(!0===this.fitToParent&&(i.top=0,i.left=0,i.width="100%",i.height="100%"),this.config!=={}&&Ext.apply(i,this.config),!s){i.listeners={};var c=this;r.forEach(function(e){var t=e.name,n=e.parameters;c.currentEl.A.props.listeners[t]=function(){var e=n,r=e.split(","),a=Array.prototype.slice.call(arguments),o={};if(null!=c._extitems){for(var i=0,s=r.length;i<s;i++)o[r[i]]=a[i];c[t].emit(o)}}})}null!=this._extitems&&r.forEach(function(e,n){"fullscreen"!=e?o[e]=new t.EventEmitter:o[e+"event"]=new t.EventEmitter})},e.prototype.baseOnChanges=function(e){var t=[];for(var n in e){!0===e[n].firstChange?"initialized":"changed";var r=e[n].currentValue;if(null!=this.currentEl.A){var a="set"+(n.charAt(0).toUpperCase()+n.slice(1));null!=this.currentEl.A.ext[a]?this.currentEl.A.ext[a](r):console.error(a+" not found for "+this.currentEl.A.ext.xtype)}t.push('$ $ to "$"')}},e.prototype.ngOnDestroy=function(){var e,t;console.dir(this);try{e=this.currentEl.A.ext,null!=this.parentEl?(t=this.parentEl.A.ext,console.log(e),console.log(t),null!=e&&null!=t||"button"==t.xtype&&"menu"==e.xtype||"carousel"==t.xtype||"grid"==t.xtype&&"column"==e.xtype||"segmentedbutton"==t.xtype&&"button"==e.xtype||"button"==t.xtype&&"tooltip"==e.xtype||"titlebar"==t.xtype&&"button"==e.xtype||"titlebar"==t.xtype&&"searchfield"==e.xtype||(t.remove([e]),e.destroy())):null!=e?e.destroy():console.log("no destroy")}catch(e){console.error(e)}},e.count=0,e.DIRECTION="",r([t.ContentChild("extroute",{static:!1}),o("design:type",Object)],e.prototype,"_extroute",void 0),r([t.ContentChildren("extroute"),o("design:type",t.QueryList)],e.prototype,"_extroutes",void 0),r([t.ContentChild("extitem",{static:!1}),o("design:type",Object)],e.prototype,"_extitem",void 0),r([t.ContentChildren("extitem"),o("design:type",t.QueryList)],e.prototype,"_extitems",void 0),r([t.ContentChildren(e),o("design:type",t.QueryList)],e.prototype,"_childComponents",void 0),e}(),s=function(){function e(){}return e.XTYPE="button",e.PROPERTIES=["eng","viewport","align","plugins","responsiveConfig","responsiveFormulas","alignSelf","allowDepress","alwaysOnTop","ariaAttributes","ariaDescribedBy","ariaLabel","ariaLabelledBy","arrow","arrowAlign","autoEvent","axisLock","badgeText","bind","border","bottom","buttonType","centered","cls","constrainAlign","contentEl","controller","data","defaultListenerScope","destroyMenu","disabled","displayed","docked","draggable","enableToggle","flex","floated","focusCls","fullscreen","handler","height","hidden","hideAnimation","hideMode","hideOnMaskTap","html","icon","iconAlign","iconCls","id","instanceCls","itemId","keyMap","keyMapEnabled","keyMapTarget","left","listeners","margin","maxHeight","maxWidth","menu","menuAlign","minHeight","minWidth","modal","modelValidation","name","nameable","padding","plugins","pressed","pressedDelay","publishes","record","reference","relative","renderTo","right","ripple","scope","scrollable","session","shadow","shareableName","shim","showAnimation","stateful","statefulDefaults","stateId","stretchMenu","style","tabIndex","text","textAlign","toFrontOnShow","toggleHandler","tooltip","top","touchAction","tpl","tplWriteMode","translatable","twoWayBindable","ui","userCls","userSelectable","value","viewModel","weight","width","x","xtype","y","zIndex","platformConfig","responsiveConfig","align","fitToParent","config"],e.EVENTS=[{name:"added",parameters:"sender,container,index"},{name:"beforebottomchange",parameters:"sender,value,oldValue,undefined"},{name:"beforecenteredchange",parameters:"sender,value,oldValue,undefined"},{name:"beforedisabledchange",parameters:"sender,value,oldValue,undefined"},{name:"beforedockedchange",parameters:"sender,value,oldValue,undefined"},{name:"beforeheightchange",parameters:"sender,value,oldValue,undefined"},{name:"beforehiddenchange",parameters:"sender,value,oldValue,undefined"},{name:"beforehide",parameters:"sender"},{name:"beforeleftchange",parameters:"sender,value,oldValue,undefined"},{name:"beforemaxHeightchange",parameters:"sender,value,oldValue,undefined"},{name:"beforemaxWidthchange",parameters:"sender,value,oldValue,undefined"},{name:"beforeminHeightchange",parameters:"sender,value,oldValue,undefined"},{name:"beforeminWidthchange",parameters:"sender,value,oldValue,undefined"},{name:"beforeorientationchange",parameters:""},{name:"beforepressedchange",parameters:"sender,value,oldValue,undefined"},{name:"beforerightchange",parameters:"sender,value,oldValue,undefined"},{name:"beforescrollablechange",parameters:"sender,value,oldValue,undefined"},{name:"beforeshow",parameters:"sender"},{name:"beforetofront",parameters:"button"},{name:"beforetopchange",parameters:"sender,value,oldValue,undefined"},{name:"beforewidthchange",parameters:"sender,value,oldValue,undefined"},{name:"blur",parameters:"button,event"},{name:"bottomchange",parameters:"sender,value,oldValue"},{name:"centeredchange",parameters:"sender,value,oldValue"},{name:"destroy",parameters:""},{name:"disabledchange",parameters:"sender,value,oldValue"},{name:"dockedchange",parameters:"sender,value,oldValue"},{name:"erased",parameters:"sender"},{name:"floatingchange",parameters:"sender,positioned"},{name:"focus",parameters:"button,event"},{name:"focusenter",parameters:"button,event"},{name:"focusleave",parameters:"button,event"},{name:"fullscreen",parameters:"sender"},{name:"heightchange",parameters:"sender,value,oldValue"},{name:"hiddenchange",parameters:"sender,value,oldValue"},{name:"hide",parameters:"sender"},{name:"initialize",parameters:"sender"},{name:"leftchange",parameters:"sender,value,oldValue"},{name:"maxHeightchange",parameters:"sender,value,oldValue"},{name:"maxWidthchange",parameters:"sender,value,oldValue"},{name:"minHeightchange",parameters:"sender,value,oldValue"},{name:"minWidthchange",parameters:"sender,value,oldValue"},{name:"moved",parameters:"sender,container,toIndex,fromIndex"},{name:"orientationchange",parameters:""},{name:"painted",parameters:"sender,element"},{name:"positionedchange",parameters:"sender,positioned"},{name:"pressedchange",parameters:"sender,value,oldValue"},{name:"release",parameters:"button,e"},{name:"removed",parameters:"sender,container,index"},{name:"resize",parameters:"element,info"},{name:"rightchange",parameters:"sender,value,oldValue"},{name:"scrollablechange",parameters:"sender,value,oldValue"},{name:"show",parameters:"sender"},{name:"tap",parameters:"button,e"},{name:"tofront",parameters:"button"},{name:"topchange",parameters:"sender,value,oldValue"},{name:"updatedata",parameters:"sender,newData"},{name:"widthchange",parameters:"sender,value,oldValue"},{name:"ready",parameters:""}],e.EVENTNAMES=["added","beforebottomchange","beforecenteredchange","beforedisabledchange","beforedockedchange","beforeheightchange","beforehiddenchange","beforehide","beforeleftchange","beforemaxHeightchange","beforemaxWidthchange","beforeminHeightchange","beforeminWidthchange","beforeorientationchange","beforepressedchange","beforerightchange","beforescrollablechange","beforeshow","beforetofront","beforetopchange","beforewidthchange","blur","bottomchange","centeredchange","destroy","disabledchange","dockedchange","erased","floatingchange","focus","focusenter","focusleave","fullscreen","heightchange","hiddenchange","hide","initialize","leftchange","maxHeightchange","maxWidthchange","minHeightchange","minWidthchange","moved","orientationchange","painted","positionedchange","pressedchange","release","removed","resize","rightchange","scrollablechange","show","tap","tofront","topchange","updatedata","widthchange","ready"],e}(),l=function(e){function l(t,n){var r=e.call(this,t.nativeElement,s,n)||this;return r.hostComponent=n,r}var d;return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(l,e),d=l,l.prototype.ngOnInit=function(){this.baseOnInit(s)},l.prototype.ngAfterViewInit=function(){this.baseAfterViewInit(s)},l.prototype.ngOnChanges=function(e){this.baseOnChanges(e)},l=d=r([t.Component({selector:"ext-button",inputs:s.PROPERTIES,outputs:s.EVENTNAMES,providers:[{provide:i,useExisting:t.forwardRef(function(){return d})}],template:"<ng-template></ng-template>"}),a(1,t.Host()),a(1,t.Optional()),a(1,t.SkipSelf()),o("design:paramtypes",[t.ElementRef,i])],l)}(i),d=function(){function e(){}return e=r([t.NgModule({imports:[],declarations:[l],providers:[],entryComponents:[],exports:[l]})],e)}();e.ExtAngularModule=d,e.ɵa=s,e.ɵb=l,e.ɵc=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=sencha-ext-angular.umd.min.js.map